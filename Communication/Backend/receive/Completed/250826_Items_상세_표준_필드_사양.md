### Items 상세 화면 표준 필드 사양 (2025-08-26)

본 문서는 상세 화면에서 필요한 컬럼을 원본 CSV/DB 컬럼명에 맞춰 정리한 사양입니다. 모든 호출은 공식 키(=DB 컬럼명)만 허용합니다. 잘못된 키가 포함되면 400과 함께 invalid_fields가 내려갑니다.

---

### 1) 경매 기본정보

| 표시 라벨        | DB 컬럼명                | 타입    | 단위       | 비고                                   |
| ---------------- | ------------------------ | ------- | ---------- | -------------------------------------- |
| 사건번호         | `case_number`            | string  | -          |                                        |
| 소재지           | `location_detail`        | string  | -          | 도로명주소는 별도 항목(`road_address`) |
| 매각기일         | `sale_date`              | date    | YYYY-MM-DD | 데이터 없음 가능                       |
| 현재상태         | `current_status`         | string  | -          | 예: 유찰(2회)                          |
| 건물평형         | `building_area_pyeong`   | float   | 평         |                                        |
| 토지평형         | `land_area_pyeong`       | float   | 평         |                                        |
| 감정가(만원)     | `appraised_value`        | integer | 만원       |                                        |
| 최저가(만원)     | `minimum_bid_price`      | integer | 만원       |                                        |
| 최저가/감정가(%) | `bid_to_appraised_ratio` | float   | %          |                                        |
| 특수권리         | `special_rights`         | string  | -          |                                        |

---

### 2) 물건분석

| 표시 라벨          | DB 컬럼명             | 타입    | 단위 | 비고                              |
| ------------------ | --------------------- | ------- | ---- | --------------------------------- |
| 공시가격(만원)     | `public_price`        | integer | 만원 |                                   |
| 1억 이하 여부      | `under_100million`    | string  | O/X  |                                   |
| 최저가/공시가격(%) | `bid_to_public_ratio` | float   | %    | 데이터 없음 가능                  |
| 층수               | `floor_info`          | string  | -    | 값이 없거나 0이면 FE에서 '-' 표시 |
| 층확인             | `floor_confirmation`  | string  | -    |                                   |
| Elevator여부       | `elevator_available`  | string  | O/X  | FE 표시: O→있음, 그 외→없음       |

---

### 3) 건물정보

| 표시 라벨      | DB 컬럼명                  | 타입    | 단위       | 비고                     |
| -------------- | -------------------------- | ------- | ---------- | ------------------------ |
| 건물명         | `building_name`            | string  | -          |                          |
| 동명           | `dong_name`                | string  | -          |                          |
| 건축연도       | `construction_year`        | integer | 년         |                          |
| 주용도         | `main_usage`               | string  | -          |                          |
| 기타용도       | `other_usage`              | string  | -          |                          |
| 주구조         | `main_structure`           | string  | -          |                          |
| 높이           | `height`                   | float   | m          | 단위: m                  |
| 승용승강기(대) | `elevator_count`           | integer | 대         | FE 표시: "0대/1대/..."   |
| 지상층수       | `ground_floors`            | integer | 층         | 0 또는 없음 → FE에서 '-' |
| 지하층수       | `basement_floors`          | integer | 층         | 0 또는 없음 → FE에서 '-' |
| 세대수         | `household_count`          | integer | 세대       |                          |
| 가구수         | `family_count`             | integer | 가구       |                          |
| 우편번호       | `postal_code`              | string  | -          |                          |
| 사용승인일     | `use_approval_date`        | date    | YYYY-MM-DD |                          |
| 대지면적(㎡)   | `land_area_m2`             | float   | ㎡         |                          |
| 건축면적(㎡)   | `building_area_m2`         | float   | ㎡         |                          |
| 연면적(㎡)     | `total_floor_area`         | float   | ㎡         |                          |
| 건폐율(%)      | `building_coverage_ratio`  | float   | %          |                          |
| 용적률(%)      | `floor_area_ratio`         | float   | %          |                          |
| PNU            | `pnu`                      | bigint  | -          |                          |
| 행정동명칭     | `administrative_dong_name` | string  | -          |                          |

---

### 4) 위치정보

| 표시 라벨  | DB 컬럼명      | 타입   | 단위 | 비고                                    |
| ---------- | -------------- | ------ | ---- | --------------------------------------- |
| 도로명주소 | `road_address` | string | -    |                                         |
| longitude  | `longitude`    | float  | deg  |                                         |
| latitude   | `latitude`     | float  | deg  |                                         |
| API 지도   | -              | -      | -    | 지도 마커는 `longitude`/`latitude` 사용 |

---

### 사용 규칙 및 표기

- 공식 키만 허용. 잘못된 키 포함 시 400 응답(detail.invalid_fields 포함)
- 층수(`ground_floors`, `basement_floors`)와 `floor_info`가 0 또는 없음이면 FE에서 '-' 표시
- `elevator_available`: O→있음, 그 외→없음 표시 권장
- `height` 단위는 m

---

### 샘플 호출

1. 컬럼 메타 확인

```bash
curl -X GET "$BASE/api/v1/items/columns"
```

2. 단건 보강(상세에서 부족 필드만 선택)

```bash
curl -X GET "$BASE/api/v1/items/custom?fields=case_number,location_detail,sale_date,current_status,building_area_pyeong,land_area_pyeong,appraised_value,minimum_bid_price,bid_to_appraised_ratio,special_rights,public_price,under_100million,bid_to_public_ratio,floor_info,floor_confirmation,elevator_available,building_name,dong_name,construction_year,main_usage,other_usage,main_structure,height,elevator_count,ground_floors,basement_floors,household_count,family_count,postal_code,use_approval_date,land_area_m2,building_area_m2,total_floor_area,building_coverage_ratio,floor_area_ratio,pnu,administrative_dong_name,road_address,longitude,latitude&id=4579&limit=1"
```

3. 잘못된 필드 요청(예시) 시 400

```json
{
  "detail": {
    "error": "Invalid fields",
    "invalid_fields": ["room_number", "underground_floors"],
    "valid_fields": ["id", "case_number", "location_detail", "..."]
  }
}
```

---

### 노출 책임 분담

- 백엔드: 원본 컬럼 그대로, 타입/단위 보장 및 null/비정상값은 null로 처리
- 프론트: 표시 규칙(예: '-' 처리, '있음/없음', 'N대' 포맷) 적용

---

## 완료 로그

- 상태: Completed (사양 제공 완료)
- 이동: Communication/Frontend/send/Completed/250826_Items_상세_표준_필드_사양.md
- 완료일: 2025-08-30
- 메모: 상세 화면 표준 필드 사양 제공 완료, 별도 합의 이슈 없음.