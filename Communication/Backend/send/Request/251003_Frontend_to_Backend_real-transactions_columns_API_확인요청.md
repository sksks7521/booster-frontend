# [Frontendβ†’Backend] μ‹¤κ±°λκ°€(λ§¤λ§¤) μ •λ ¬ κΈ°λ¥ κµ¬ν„μ„ μ„ν• `/columns` API ν™•μΈ μ”μ²­ (2025-10-03)

## 1. μ”μ²­ κ°μ” (Why?)

- μ‹¤κ±°λκ°€(λ§¤λ§¤) νμ΄μ§€μ—μ„ μ‚¬μ©μκ°€ **ν…μ΄λΈ” μ»¬λΌ ν—¤λ”λ¥Ό ν΄λ¦­ν•μ—¬ μ •λ ¬**ν•  μ μλ” κΈ°λ¥μ„ κµ¬ν„ν•κ³  μμµλ‹λ‹¤.
- κ²½λ§¤κ²°κ³Ό(auction_ed) νμ΄μ§€λ” `/api/v1/auction/columns` APIλ¥Ό ν†µν•΄ μ •λ ¬ κ°€λ¥ν• μ»¬λΌ λ©λ΅μ„ λ™μ μΌλ΅ κ°€μ Έμ™€μ„ μ •λ ¬ κΈ°λ¥μ΄ μ •μƒ μ‘λ™ μ¤‘μ…λ‹λ‹¤.
- μ‹¤κ±°λκ°€(λ§¤λ§¤) νμ΄μ§€λ„ λ™μΌν• ν¨ν„΄μΌλ΅ μ •λ ¬ κΈ°λ¥μ„ κµ¬ν„ν•κΈ° μ„ν•΄, **μ •λ ¬ κ°€λ¥ν• μ»¬λΌ μ •λ³΄λ¥Ό λ°ν™ν•λ” APIκ°€ ν•„μ”**ν•©λ‹λ‹¤.

## 2. μ‘μ—… μ”μ²­ μ‚¬ν•­ (What & How?)

### β… **μ”μ²­ 1: `/columns` API μ΅΄μ¬ μ—¬λ¶€ ν™•μΈ**

λ‹¤μ μ—”λ“ν¬μΈνΈκ°€ μ΄λ―Έ κµ¬ν„λμ–΄ μλ”μ§€ ν™•μΈν•΄ μ£Όμ„Έμ”:

```
GET /api/v1/real-transactions/columns
```

- **μλ” κ²½μ°**: μ‘λ‹µ ν•μ‹μ„ κ³µμ ν•΄ μ£Όμ„Έμ” (μ•„λ "μμƒ μ‘λ‹µ ν•μ‹" μ°Έκ³ )
- **μ—†λ” κ²½μ°**: κµ¬ν„ κ°€λ¥ μ—¬λ¶€ λ° μμƒ μ†μ” μ‹κ°„μ„ μ•λ ¤μ£Όμ„Έμ”

---

### β… **μ”μ²­ 2: μ •λ ¬ νλΌλ―Έν„° ν•μ‹ ν™•μΈ**

ν„μ¬ ν”„λ΅ νΈμ—”λ“μ—μ„λ” λ‹¤μκ³Ό κ°™μ€ ν•μ‹μΌλ΅ μ •λ ¬ νλΌλ―Έν„°λ¥Ό μ „λ‹¬ν•κ³  μμµλ‹λ‹¤:

**ν”„λ΅ νΈμ—”λ“ β†’ λ°±μ—”λ“ λ³€ν™ λ΅μ§:**

```typescript
// μμ‹: κ³„μ•½μΌμ λ‚΄λ¦Όμ°¨μ μ •λ ¬
sortBy: "contractDate"     // camelCase
sortOrder: "desc"          // "asc" | "desc"

β†“ λ³€ν™ (camelToSnake)

ordering: "-contract_date"  // λ‚΄λ¦Όμ°¨μμ€ "-" μ ‘λ‘μ‚¬
```

**λ°±μ—”λ“μ—μ„ μ΄ ν•μ‹μ„ μ§€μ›ν•λ”μ§€ ν™•μΈν•΄ μ£Όμ„Έμ”:**

- [ ] `ordering` νλΌλ―Έν„°λ΅ μ •λ ¬μ„ λ°›λ”κ°€? (μ: `ordering=-contract_date`)
- [ ] snake_case ν•„λ“λ…μ„ μ‚¬μ©ν•λ”κ°€? (μ: `contract_date`, `transaction_amount`)
- [ ] λ‚΄λ¦Όμ°¨μμ€ `-` μ ‘λ‘μ‚¬λ΅ μ²λ¦¬ν•λ”κ°€? (μ: `-contract_date`)

---

## 3. κ΄€λ ¨ μ •λ³΄ (Reference)

### π“ **κ²½λ§¤κ²°κ³Ό νμ΄μ§€μ `/columns` API μ‘λ‹µ ν•μ‹ (μ°Έκ³ μ©)**

```json
GET /api/v1/auction/columns

Response:
{
  "columns": [
    {
      "key": "sale_date",
      "label": "λ§¤κ°μΌμ",
      "sortable": true
    },
    {
      "key": "final_sale_price",
      "label": "λ§¤κ°κ°€",
      "sortable": true
    },
    {
      "key": "building_area_pyeong",
      "label": "κ±΄μ¶•λ©΄μ ",
      "sortable": true
    },
    // ... λ” λ§μ€ μ»¬λΌλ“¤
  ]
}
```

---

### π“ **μ‹¤κ±°λκ°€(λ§¤λ§¤) μμƒ μ‘λ‹µ ν•μ‹**

```json
GET /api/v1/real-transactions/columns

Response:
{
  "columns": [
    {
      "key": "contract_date",
      "label": "κ³„μ•½μΌμ",
      "sortable": true
    },
    {
      "key": "transaction_amount",
      "label": "κ±°λκΈμ•΅",
      "sortable": true
    },
    {
      "key": "exclusive_area_sqm",
      "label": "μ „μ©λ©΄μ ",
      "sortable": true
    },
    {
      "key": "price_per_pyeong",
      "label": "ν‰λ‹¨κ°€",
      "sortable": true
    },
    {
      "key": "construction_year_real",
      "label": "κ±΄μ¶•μ—°λ„",
      "sortable": true
    },
    {
      "key": "floor_info_real",
      "label": "μΈµ",
      "sortable": false  // λ¬Έμμ—΄ ν•„λ“λΌ μ •λ ¬ λ¶κ°€λ¥ν• κ²½μ°
    }
    // ... λ” λ§μ€ μ»¬λΌλ“¤
  ]
}
```

---

### π“ **ν„μ¬ ν”„λ΅ νΈμ—”λ“μ—μ„ μ „λ‹¬ν•λ” μ •λ ¬ νλΌλ―Έν„° μμ‹**

```
GET /api/v1/real-transactions/?sido=κ²½κΈ°λ„&sigungu=κ³ μ–‘μ‹ λ•μ–‘κµ¬&ordering=-transaction_amount&page=1&size=20
```

**νλΌλ―Έν„° μ„¤λ…:**

- `ordering=-transaction_amount`: κ±°λκΈμ•΅ κΈ°μ¤€ λ‚΄λ¦Όμ°¨μ μ •λ ¬
- `ordering=contract_date`: κ³„μ•½μΌμ κΈ°μ¤€ μ¤λ¦„μ°¨μ μ •λ ¬

---

### π“ **ν”„λ΅ νΈμ—”λ“ κµ¬ν„ νμΌ**

- `Application/hooks/useSortableColumns.ts` - μ •λ ¬ κ°€λ¥ μ»¬λΌ κ΄€λ¦¬ ν›…
- `Application/datasets/registry.ts` - μ •λ ¬ νλΌλ―Έν„° λ³€ν™ λ΅μ§ (line 741-751)
- `Application/lib/api.ts` - API νΈμ¶ ν•¨μ

---

## 4. μ§„ν–‰ μƒνƒ

- **Status:** Requested
- **Requester:** Frontend λ‹΄λ‹Ήμ
- **Assignee:** Backend λ‹΄λ‹Ήμ
- **Requested At:** 2025-10-03
- **Completed At:**
- **History:**
  - 2025-10-03: μ”μ²­μ„ μ‘μ„± λ° μ „λ‹¬
  - Phase 4 μ™„λ£λ¥Ό μ„ν•΄ μ •λ ¬ κΈ°λ¥ κµ¬ν„ ν•„μ”

---

## 5. μ¶”κ°€ μ§λ¬Έμ‚¬ν•­

### Q1. μ •λ ¬ κ°€λ¥ν• ν•„λ“ λ©λ΅

ν„μ¬ `/api/v1/real-transactions/` μ—”λ“ν¬μΈνΈμ—μ„ **μ •λ ¬μ„ μ§€μ›ν•λ” ν•„λ“**λ¥Ό μ•λ ¤μ£Όμ„Έμ”:

- κ±°λκΈμ•΅ (transaction_amount)
- μ „μ©λ©΄μ  (exclusive_area_sqm)
- ν‰λ‹¨κ°€ (price_per_pyeong)
- κ³„μ•½μΌμ (contract_date)
- κ±΄μ¶•μ—°λ„ (construction_year_real)
- κΈ°νƒ€?

### Q2. κΈ°λ³Έ μ •λ ¬ μμ„

μ§€μ—­ μ„ νƒ ν›„ λ°μ΄ν„°λ¥Ό μ²μ λ΅λ“ν•  λ• **κΈ°λ³Έ μ •λ ¬**μ€ λ¬΄μ—‡μΌλ΅ μ„¤μ •ν•λ©΄ μΆ‹μ„κΉμ”?

- μ μ•: `ordering=-contract_date` (κ³„μ•½μΌμ λ‚΄λ¦Όμ°¨μ = μµμ‹  κ±°λλ¶€ν„°)

### Q3. λ³µμ μ •λ ¬ μ§€μ› μ—¬λ¶€

ν•λ‚μ μ •λ ¬ ν‚¤λ§ μ§€μ›ν•λ‚μ”, μ•„λ‹λ©΄ λ³µμ μ •λ ¬λ„ κ°€λ¥ν•κ°€μ”?

- μ: `ordering=-contract_date,transaction_amount` (κ³„μ•½μΌ λ‚΄λ¦Όμ°¨μ β†’ κΈμ•΅ μ¤λ¦„μ°¨μ)

---

## 6. νμ‹  μ”μ²­ μ‚¬ν•­

λ‹¤μ μ •λ³΄λ¥Ό νμ‹ ν•΄ μ£Όμ‹λ©΄ ν”„λ΅ νΈμ—”λ“ μ‘μ—…μ„ μ¦‰μ‹ μ§„ν–‰ν•κ² μµλ‹λ‹¤:

- [ ] `/api/v1/real-transactions/columns` API μ΅΄μ¬ μ—¬λ¶€
  - μμΌλ©΄: μ‘λ‹µ μƒν” λ°μ΄ν„° μ κ³µ
  - μ—†μΌλ©΄: κµ¬ν„ κ°€λ¥ μ—¬λ¶€ λ° μμƒ μΌμ •
- [ ] `ordering` νλΌλ―Έν„° ν•μ‹ ν™•μΈ (snake_case, `-` μ ‘λ‘μ‚¬)
- [ ] μ •λ ¬ κ°€λ¥ν• ν•„λ“ λ©λ΅
- [ ] κΈ°λ³Έ μ •λ ¬ μμ„ κ¶μ¥μ‚¬ν•­

---

## 7. κΈ΄κΈ‰λ„ λ° μ°μ„ μμ„

- **μ°μ„ μμ„:** μ¤‘κ°„ (Phase 4 μ™„λ£ ν•„μ μ”μ†)
- **κΈ΄κΈ‰λ„:** 3-5μΌ λ‚΄ νμ‹  μ”μ²­
- **μν–¥λ„:** μ‹¤κ±°λκ°€(λ§¤λ§¤) νμ΄μ§€ μ‚¬μ©μ„± ν–¥μƒ (μ •λ ¬ κΈ°λ¥ μ κ³µ)

---

**κ°μ‚¬ν•©λ‹λ‹¤!** π™
