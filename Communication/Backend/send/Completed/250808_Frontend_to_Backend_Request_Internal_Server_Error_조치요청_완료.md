# [ν”„λ΅ νΈμ—”λ“β†’λ°±μ—”λ“] λ°μ΄ν„° μ—”λ“ν¬μΈνΈ 500 Internal Server Error μ΅°μΉ μ”μ²­ (2025-08-08)

## 1. μ”μ²­ κ°μ” (Why?)

- ν”„λ΅ νΈμ—”λ“κ°€ μ‹¤μ  API μ „ν™μ„ μ„ν•΄ μ—°λ™ ν…μ¤νΈλ¥Ό μ§„ν–‰ν• κ²°κ³Ό, ν—¬μ¤ μ²΄ν¬λ” μ •μƒ(OK)μ΄λ‚ μ£Όμ” λ°μ΄ν„° μ΅°ν μ—”λ“ν¬μΈνΈμ—μ„ `500 Internal Server Error`κ°€ λ°μƒν•κ³  μμµλ‹λ‹¤.
- Alpha μΌμ •(2025-08-20)μ„ κ³ λ ¤ν•λ©΄, ν”„λ΅ νΈμ—”λ“μ μ‹¤μ  λ°μ΄ν„° μ—°λ™ λ° QAκ°€ μ¦‰μ‹ ν•„μ”ν•©λ‹λ‹¤. ν•΄λ‹Ή 500 μ¤λ¥ μ΅°μΉκ°€ μ„ ν–‰λμ–΄μ•Ό ν•λ―€λ΅ κΈ΄κΈ‰ μ”μ²­λ“λ¦½λ‹λ‹¤.

## 2. μ‘μ—… μ”μ²­ μ‚¬ν•­ (What & How?)

### A. μ¬ν„ λ°©λ²• λ° ν„μ¬ μ¦μƒ

λ‹¤μ μ”μ²­μ€ λ¨λ‘ λ΅μ»¬ μ„λ²„(λ°±μ—”λ“ μΈ΅ μ•λ‚΄ URL) λ€μƒμ΄λ©°, νΈμ¶ μ‹ 500 μ¤λ¥κ°€ μ¬ν„λ©λ‹λ‹¤.

```bash
# ν—¬μ¤ μ²΄ν¬ (μ •μƒ)
curl -s http://127.0.0.1:8000/health
# => {"status":"healthy","service":"booster-backend", ... }

# λ°μ΄ν„° μ—”λ“ν¬μΈνΈ (500 λ°μƒ)
curl -s "http://127.0.0.1:8000/api/v1/items/simple?limit=1"     # 500
curl -s "http://127.0.0.1:8000/api/v1/items/?limit=1"           # 500
curl -s "http://127.0.0.1:8000/api/v1/auction-completed/?limit=1" # 500
curl -s "http://127.0.0.1:8000/api/v1/real-transactions/?limit=1" # 500
curl -s "http://127.0.0.1:8000/api/v1/real-rents/?limit=1"        # 500
```

- λ°±μ—”λ“ μ‹¤ν–‰ μƒνƒ: Uvicorn μ •μƒ κΈ°λ™, PostgreSQL μ»¨ν…μ΄λ„ `booster-postgres-new` μ‹¤ν–‰, `/docs` μ ‘κ·Ό κ°€λ¥.
- ν”„λ΅ νΈμ—”λ“ μ—°λ™ μƒνƒ: `USE_REAL_API = true` μ „ν™ μ™„λ£, `NEXT_PUBLIC_API_BASE_URL` μ‚¬μ© μ¤€λΉ„ μ™„λ£.

### B. μ”μ²­λ“λ¦¬λ” μ΅°μΉ (μ›μΈ λ¶„μ„ μ²΄ν¬λ¦¬μ¤νΈ)

- [ ] μ„λ²„ λ΅κ·Έμ—μ„ μ„ 5κ° GET μ”μ²­μ μ¤νƒ νΈλ μ΄μ¤ ν™•μΈ λ° μμ™Έ μ›μΈ λ¶„μ„
  - μμ‹¬ ν¬μΈνΈ: DB μ—°κ²°/μ¤ν‚¤λ§, Alembic λ§μ΄κ·Έλ μ΄μ… μƒνƒ, μΏΌλ¦¬ νλΌλ―Έν„° κΈ°λ³Έκ°’/κ²€μ¦, λ°μ΄ν„° λ³€ν™(Integer/Date/Float), μ‘λ‹µ μ§λ ¬ν™” μ¤ν‚¤λ§
- [ ] `/api/v1/items/simple` λ° `/api/v1/items/`μ `limit` λ“± κΈ°λ³Έ νλΌλ―Έν„° μ ν¨μ„±/κΈ°λ³Έκ°’ μ κ²€
- [ ] 4κ° λ°μ΄ν„° μ†μ¤ μ—”λ“ν¬μΈνΈ(κ²½λ§¤μ™„λ£, μ‹¤κ±°λλ§¤λ§¤, μ‹¤κ±°λμ „μ›”μ„Έ)μ μΏΌλ¦¬/μ΅°μΈ/λ·° μ΅΄μ¬ μ—¬λ¶€ λ° μƒν” λ°μ΄ν„° μ΅°ν ν™•μΈ
- [ ] (ν•„μ” μ‹) κ°λ° ν™κ²½μ© μ‹λ“/μƒν” λ°μ΄ν„° μ£Όμ… ν›„ μ¬κ²€μ¦
- [ ] (μ„ νƒ) 500μ„ 4xxλ΅ λ‹¤μ΄κ·Έλ μ΄λ“ κ°€λ¥ν• κ²½μ° μ¤ν‚¤λ§/μ ν¨μ„± λ©”μ‹μ§€λ΅ λ°ν™(λ””λ²„κΉ… μ©μ΄)

### C. μμ •/λ°°ν¬ μ”μ²­

- [ ] μ„ μ—”λ“ν¬μΈνΈλ“¤μ΄ μµμ† νλΌλ―Έν„°λ΅ νΈμ¶ μ‹ `200 OK`μ™€ μ ν¨ν• JSONμ„ λ°ν™ν•λ„λ΅ μμ •
- [ ] Swagger μ¤ν‚¤λ§μ™€ μ‹¤μ  μ‘λ‹µ ν•„λ“ λ¶μΌμΉ μ‹ λ™κΈ°ν™”
- [ ] μ¤λ¥ μ›μΈ λ° μμ • λ‚΄μ—­μ„ λ³Έ μ”μ²­μ„ `History`μ— κ°„λ‹¨ κΈ°λ΅

### D. μμ© κΈ°μ¤€ (Acceptance Criteria)

- [ ] λ‹¤μ νΈμ¶μ΄ λ¨λ‘ `200 OK`λ΅ μ‘λ‹µν•λ©° JSON νμ‹± κ°€λ¥
  - `GET /api/v1/items/simple?limit=1`
  - `GET /api/v1/items/?limit=1`
  - `GET /api/v1/auction-completed/?limit=1`
  - `GET /api/v1/real-transactions/?limit=1`
  - `GET /api/v1/real-rents/?limit=1`
- [ ] `/docs`μ κ° μ—”λ“ν¬μΈνΈ Try-it-out μ‹¤ν–‰ μ‹ 200 μ‘λ‹µ ν™•μΈ
- [ ] (μ„ νƒ) ν…μ¤νΈμ© μ•„μ΄ν… ID 1κ° κ³µμ (μƒμ„Έ/Comparables μ—°λ™ μ¤λ¨ν¬ ν…μ¤νΈμ©)

## 3. κ΄€λ ¨ μ •λ³΄ (Reference)

- λ°±μ—”λ“ μ•λ‚΄ URL: `http://127.0.0.1:8000`
- Swagger UI: `http://127.0.0.1:8000/docs`
- ν”„λ΅ νΈμ—”λ“ λ³€κ²½ μ‚¬ν•­:
  - `Application/hooks/useItemDetail.ts` β†’ `USE_REAL_API = true`
  - `Application/lib/api.ts` β†’ `NEXT_PUBLIC_API_BASE_URL` ν™κ²½λ³€μ μ°μ„  μ‚¬μ©
- ν”„λ΅ νΈμ—”λ“ ν—¬μ¤ μ²΄ν¬ κ²°κ³Ό: μ •μƒ
- ν”„λ΅ νΈμ—”λ“ νΈμ¶ ν™κ²½: Windows PowerShell, curlλ΅ μ¬ν„λ¨

## 4. μ§„ν–‰ μƒνƒ

- **Status:** Completed
- **Requester:** Frontend ν€
- **Assignee:** Backend ν€
- **Requested At:** 2025-08-08
- **Completed At:** 2025-08-08
- **History:**
  - 2025-08-08: ν”„λ΅ νΈμ—”λ“, μ‹¤μ  API μ—°λ™ ν…μ¤νΈ μ¤‘ λ°μ΄ν„° μ—”λ“ν¬μΈνΈ 500 μ¤λ¥ κ°μ§€ λ° μ΅°μΉ μ”μ²­
  - 2025-08-08: Backend μ›μΈ λ¶„μ„ λ° μμ • μ™„λ£
    - μ›μΈ 1: `/api/v1/auction-completed/`μ—μ„ CRUD λ°ν™κ°’ `(items, total_count)` μ–Έν¨ν‚Ή λ„λ½μΌλ΅ Pydantic κ²€μ¦ μ‹¤ν¨ β†’ μ—”λ“ν¬μΈνΈμ—μ„ μ–Έν¨ν‚Ή μ μ© ν›„ μ •μƒν™” (`200 OK`).
    - μ›μΈ 2: `/api/v1/real-rents/`κ°€ μ‹¤κ±°λ λ§¤λ§¤ CRUD/μ¤ν‚¤λ§λ¥Ό μλ» μ°Έμ΅° β†’ μ „μ›”μ„Έ μ „μ© CRUD/μ¤ν‚¤λ§λ΅ κµμ²΄ν•κ³  νλΌλ―Έν„°/μ‘λ‹µ μ •ν•©ν™”.
    - κ²€μ¦: 5κ° μ—”λ“ν¬μΈνΈ μµμ† νλΌλ―Έν„° νΈμ¶ μ‹ λ¨λ‘ `200 OK` ν™•μΈ.
      - GET `/api/v1/items/simple?limit=1` β†’ 200
      - GET `/api/v1/items/?limit=1` β†’ 200
      - GET `/api/v1/auction-completed/?limit=1` β†’ 200
      - GET `/api/v1/real-transactions/?limit=1` β†’ 200
      - GET `/api/v1/real-rents/?limit=1` β†’ 200
    - Swagger λ™κΈ°ν™”: OpenAPI μ¤ν‚¤λ§(`AuctionCompletedsResponse`, `RealRentsResponse`)μ™€ μ‹¤μ  μ‘λ‹µ κµ¬μ΅° μΌμΉ ν™•μΈ.

---

## λ¶€λ΅: μ¬ν„ λ΅κ·Έ μ¤λƒ…μƒ·

- ν—¬μ¤ μ²΄ν¬ μ‘λ‹µ(μ”μ•½): `{ "status": "healthy", "service": "booster-backend", ... }`
- λ°μ΄ν„° μ—”λ“ν¬μΈνΈ κ³µν†µ μ‘λ‹µ: `Internal Server Error`

ν•„μ” μ‹ μ¶”κ°€ λ΅κ·Έ/μ¤ν¬λ¦°μƒ· μ κ³µ κ°€λ¥ν•©λ‹λ‹¤. λΉ λ¥Έ μ΅°μΉ λ¶€νƒλ“λ¦½λ‹λ‹¤. π™
