### [요청] 프론트엔드: 수익률 계산 및 투자 분석 알고리즘 개발 요청

**1. 요청 일시:** 2025-08-05
**2. 요청자:** 프론트엔드 팀
**3. 관련 문서:**

- `Doc/PRD.md` (기능 3: 수익률 시뮬레이션, 기능 2: 상세 분석의 투자 분석)
- `PROJECT_FRONTEND_ROADMAP.md` (Phase 4: Task 5.1.2, Phase 3: Task 4.2.3)

---

### **4. 요청 배경 (Why)**

프론트엔드 개발 로드맵의 **Phase 4: 수익률 계산기** 및 **Phase 3: 상세 분석의 투자 분석 기능**을 구현하기 위해 정확하고 신뢰할 수 있는 **투자 분석 알고리즘**이 필요합니다.

현재 UI 및 데이터 연동 구조는 준비되었으나, **핵심 비즈니스 로직인 수익률 계산 및 투자 분석 알고리즘**이 없어 실제 가치 있는 서비스 제공이 불가능한 상황입니다.

데이터분석 팀의 전문성을 바탕으로 정확한 분석 모델을 개발하여 프론트엔드에 API 형태로 제공해 주시기 바랍니다.

---

### **5. 상세 요구사항 (What)**

#### **5-1. 수익률 계산 알고리즘**

##### **A. 기본 수익률 지표**
- **예상 수익률 (Expected Return)**:
  ```
  - 임대 수익률 (Rental Yield)
  - 자본 이득률 (Capital Gain Rate)
  - 총 수익률 (Total Return)
  - 연환산 수익률 (Annualized Return)
  ```

- **리스크 지표**:
  ```
  - 표준편차 (Volatility)
  - 최대 손실 가능성 (Value at Risk)
  - 샤프 비율 (Risk-adjusted Return)
  ```

##### **B. 시나리오별 분석**
- **보수적 시나리오**: 최소 예상 수익률
- **기대 시나리오**: 평균 예상 수익률  
- **낙관적 시나리오**: 최대 예상 수익률

#### **5-2. 투자 분석 알고리즘**

##### **A. 매물 평가 모델**
- **적정가 산정**:
  ```
  - 수익 접근법 (Income Approach)
  - 비교 접근법 (Comparative Approach)
  - 비용 접근법 (Cost Approach)
  - 가중평균 적정가
  ```

- **투자 매력도 점수**:
  ```
  - 수익성 점수 (0-100점)
  - 안전성 점수 (0-100점)
  - 유동성 점수 (0-100점)
  - 종합 점수 (가중평균)
  ```

##### **B. 시장 분석 모델**
- **지역별 시장 동향**:
  ```
  - 거래량 변화 추이
  - 가격 변동 추이
  - 공급/수요 분석
  - 향후 전망 (상승/하락/보합)
  ```

#### **5-3. 비교 분석 알고리즘**

##### **A. 유사 매물 찾기**
- **유사도 점수 계산**:
  ```
  - 위치 유사도 (반경, 교통 접근성)
  - 물리적 유사도 (면적, 건축연도, 구조)
  - 가격대 유사도
  - 종합 유사도 점수
  ```

##### **B. 상대적 매력도 평가**
- **시장 내 위치**: 상위 몇 %인지
- **가격 경쟁력**: 시세 대비 할인/프리미엄 정도
- **투자 우선순위**: 동일 예산 대비 최적 선택지

---

### **6. 알고리즘 입력 데이터**

#### **6-1. 매물 정보**
```json
{
  "property": {
    "price": 45000,
    "area": 25,
    "buildYear": 2010,
    "location": {
      "lat": 37.5,
      "lng": 127.03,
      "address": "서울시 강남구 역삼동"
    },
    "structure": {
      "floor": 3,
      "totalFloors": 4,
      "hasElevator": true,
      "hasParking": true
    }
  }
}
```

#### **6-2. 투자 조건**
```json
{
  "investment": {
    "downPayment": 20000,      // 자기자본
    "loanAmount": 25000,       // 대출금
    "loanRate": 4.5,           // 대출 금리
    "loanPeriod": 20,          // 대출 기간
    "holdingPeriod": 5,        // 보유 기간
    "maintenanceCost": 50,     // 월 관리비
    "taxRate": 6.6             // 종합 세율
  }
}
```

#### **6-3. 임대 정보**
```json
{
  "rental": {
    "monthlyRent": 1500,       // 예상 월세
    "deposit": 10000,          // 보증금
    "vacancyRate": 5,          // 공실률 (%)
    "rentIncrease": 3          // 연간 임대료 상승률 (%)
  }
}
```

---

### **7. 알고리즘 출력 결과**

#### **7-1. 수익률 분석 결과**
```json
{
  "returns": {
    "annualizedReturn": 8.2,
    "totalReturn": 47.3,
    "rentalYield": 4.1,
    "capitalGain": 4.1,
    "netProfit": 18500000
  },
  "scenarios": {
    "conservative": { "return": 5.8, "probability": 0.2 },
    "expected": { "return": 8.2, "probability": 0.6 },
    "optimistic": { "return": 12.1, "probability": 0.2 }
  },
  "risks": {
    "volatility": 15.2,
    "maxLoss": -8.5,
    "sharpRatio": 0.68
  }
}
```

#### **7-2. 투자 분석 결과**
```json
{
  "valuation": {
    "fairValue": 48000,
    "currentPrice": 45000,
    "discount": 6.7,
    "recommendation": "BUY"
  },
  "scores": {
    "profitability": 82,
    "safety": 74,
    "liquidity": 68,
    "overall": 75
  },
  "marketPosition": {
    "percentile": 78,
    "ranking": "상위 22%",
    "competitiveness": "높음"
  }
}
```

---

### **8. API 엔드포인트 요청**

#### **8-1. 수익률 계산 API**
- **Method**: `POST`
- **Endpoint**: `/api/v1/analysis/calculate-returns`
- **Description**: 특정 매물과 투자 조건에 대한 수익률 계산

#### **8-2. 투자 분석 API** 
- **Method**: `POST`
- **Endpoint**: `/api/v1/analysis/investment-analysis`
- **Description**: 매물의 투자 매력도 및 적정가 분석

#### **8-3. 비교 분석 API**
- **Method**: `POST`
- **Endpoint**: `/api/v1/analysis/comparative-analysis`
- **Description**: 유사 매물 대비 상대적 매력도 분석

---

### **9. 우선순위 및 단계별 계획**

#### **Phase 1: 기본 수익률 계산 (Priority: High)**
- **완료 목표**: 2025-08-15 (목)
- **범위**: 단순 수익률 계산 (임대수익률, 자본이득률)
- **목적**: 프론트엔드 수익률 계산기 기본 기능 테스트

#### **Phase 2: 고도화된 투자 분석 (Priority: Medium)**
- **완료 목표**: 2025-08-25 (일)
- **범위**: 적정가 산정, 투자 점수, 리스크 분석
- **목적**: 상세 분석 화면 투자 분석 기능 구현

#### **Phase 3: 시장 분석 및 예측 (Priority: Low)**
- **완료 목표**: 2025-09-05 (목)
- **범위**: 시장 동향, 미래 전망, 머신러닝 모델
- **목적**: 고급 분석 기능 제공

---

### **10. 기술적 요구사항**

#### **10-1. 성능**
- **응답 시간**: 3초 이내
- **동시 처리**: 100개 요청/분 이상
- **정확도**: 실제 거래 사례 대비 오차 10% 이내

#### **10-2. 모델 업데이트**
- **시장 데이터 반영**: 월 1회 모델 재학습
- **파라미터 조정**: 계절성, 경제 지표 반영
- **백테스팅**: 과거 데이터로 모델 검증

#### **10-3. 투명성**
- **계산 근거 제공**: 주요 가정과 계산 과정 설명
- **신뢰도 지표**: 예측의 신뢰 구간 제공
- **면책 조항**: 투자 조언이 아닌 참고 자료임을 명시

---

### **11. 협업 방식**

#### **11-1. 정기 검토**
- **주간 미팅**: 매주 금요일 오후 3시
- **내용**: 알고리즘 개발 진행 상황, 검증 결과, 개선사항

#### **11-2. 모델 검증**
- **샘플 케이스 테스트**: 실제 매물 10건으로 프론트엔드 연동 테스트
- **전문가 검토**: 부동산 전문가의 결과 검증

#### **11-3. 문서화**
- **알고리즘 명세서**: 계산 로직과 가정 사항 상세 문서화
- **API 문서**: Swagger를 통한 상세한 API 스펙 제공

---

### **12. 완료 확인 방법**

1. **기능 테스트**: 프론트엔드에서 수익률 계산기 정상 동작 확인
2. **정확도 검증**: 실제 거래 사례와의 오차율 측정
3. **성능 테스트**: 동시 요청 처리 및 응답시간 확인

---

### **13. 참고사항**

- **규제 준수**: 금융 상품 판매 규제에 저촉되지 않도록 '참고용' 정보임을 명시
- **데이터 보안**: 사용자의 투자 정보는 로그에 저장하지 않음
- **오류 처리**: 계산 불가능한 경우의 예외 처리 로직 포함