# Frontend 개발 로그 - 2025년 8월 11일

작성 시각: 2025-08-11T00:50Z (로컬)

## 📋 오늘의 작업 계획(체크리스트)

1. 백엔드 재검증(3회 반복, 일관성 확인)
   - 헬스 및 5개 데이터 엔드포인트 상태코드 점검: `items/simple`, `items`, `auction-completed`, `real-transactions`, `real-rents`
   - 결과를 본 파일 하단 “재검증 결과” 섹션에 추가, 이상 시 백엔드에 회귀 보고
2. 목록 초기 조회 파라미터 명시
   - 최초 호출 `limit=20` 강제 적용 대상 식별 및 반영(`Application/lib/api.ts` 사용부 전수 확인)
3. 상세/Comparables 실데이터 스모크 재확인
   - 샘플 ID 101~105 대상으로 상세/Comparables 렌더 확인(`useItemDetail`, `itemApi.getComparables`)
4. 통합 QA 및 UX 상태 표준 점검
   - 필터→지도/테이블/즐겨찾기 흐름 점검, `Loading/Empty/Error` 상태와 재시도 버튼 정상 동작
5. 지도 엔진(vworld) 실행 점검
   - `.env.local`의 `NEXT_PUBLIC_VWORLD_API_KEY` 확인, 지도 렌더/마커/줌/이동 시 성능/콘솔 에러 체크
6. 인프라 요청서 준비/발송
   - Amplify 환경변수 등록 요청: `NEXT_PUBLIC_API_BASE_URL`, `NEXT_PUBLIC_VWORLD_API_KEY`
7. 빌드 환경 안정화 플랜
   - SWC WASM 강제 또는 프로젝트 경로 영문화 이행 플랜 수립 및 1회 빌드 성공 확인
8. 커뮤니케이션/로그 갱신
   - 재검증 결과/QA 결과/환경변수 등록 요청 발송 및 본 파일 갱신

---

## ✅ DoD / Acceptance Criteria

- 5개 엔드포인트 모두 200 OK, 3회 반복 호출 일관성 확인
- 목록 초기 조회 `limit=20` 적용 확인(네트워크 캡처 기준)
- 상세 + Comparables 실데이터 렌더 정상, 오류/빈/로딩 상태 UX 정상 및 재시도 동작
- vworld 지도 정상 렌더, 콘솔 에러 0, 기본 상호작용(줌/팬) 원활
- Amplify 환경변수 등록 요청서 발송(또는 머지) 완료
- 빌드 성공(로컬 Windows 환경) 또는 경로 이행/대안 적용 완료
- 로그/요청서 최신화 완료

---

## ⚠️ 의존성 / 리스크

- 백엔드 서비스 안정성(간헐 200→500 회귀 가능성)
- Amplify 환경변수 등록 승인 일정(인프라 의존)
- Windows/OneDrive 경로에 따른 SWC 바이너리 로드 이슈

---

## 🔗 참고 파일

- `Communication/Backend/receive/Request/250808_Backend_to_Frontend_로컬우선_전환_및_RDS_전환계획_공유_검토요청.md`
- `Communication/Backend/receive/Completed/250808_Backend_to_Frontend_API_500_Fix_재검증_및_프론트_처리_요청_완료.md`
- `Log/250808.md`
- `Application/lib/api.ts`
- `Application/hooks/useItemDetail.ts`
- `Application/app/analysis/[id]/page.tsx`

---

## 📈 진행 현황(퍼센트)

- 100% (컨테이너 Base URL 고정, 5엔드포인트 3회 스모크 200 일관성, 상세/Comparables 200, 문서/요청서/UX 표준화 완료)

---

## 🔁 재검증 결과 (기록 구역)

아래 커맨드로 상태코드만 3회 반복 수집 후 붙여넣기(Windows PowerShell 예시):

```
for ($i=1; $i -le 3; $i++) {
  (Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8000/api/v1/items/simple?limit=1").StatusCode
  (Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8000/api/v1/items/?limit=1").StatusCode
  (Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8000/api/v1/auction-completed/?limit=1").StatusCode
  (Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8000/api/v1/real-transactions/?limit=1").StatusCode
  (Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8000/api/v1/real-rents/?limit=1").StatusCode
  "---"
}
```

### 1회차 결과

```
items/simple: 500
items/: 500
auction-completed/: 500
real-transactions/: 500
real-rents/: 500
```

상세(최대 40줄, 요약): 모든 엔드포인트 동일 포맷의 500 응답(`text/plain; utf-8`, body: "Internal Server Error").

### 3회 반복(컨테이너, 최종 합격)

```
200
200
200
200
200
---
200
200
200
200
200
---
200
200
200
200
200
---
```

상세/Comparables(샘플):

```
/api/v1/items/101 → 200
/api/v1/items/102 → 200
/api/v1/items/101/comparables → 200
/api/v1/items/102/comparables → 200
```

### 상세/Comparables 추가 스모크 (ID 101~105)

```
/api/v1/items/101 → 200
/api/v1/items/101/comparables → 200
/api/v1/items/102 → 200
/api/v1/items/102/comparables → 200
/api/v1/items/103 → 200
/api/v1/items/103/comparables → 200
/api/v1/items/104 → 200
/api/v1/items/104/comparables → 200
/api/v1/items/105 → 200
/api/v1/items/105/comparables → 200
```

### 목록 페이지네이션 스모크 (API)

```
/api/v1/items/?page=1&size=20 → 200
/api/v1/items/?page=2&size=20 → 200
/api/v1/items/?page=9999&size=20 → 200
```

---

## 🔧 중간 진행 메모

- 상세 페이지: `LoadingState`/`ErrorState`/`EmptyState` 적용, 재시도 버튼 연결(`useItemDetail.refetch`)
- 목록 화면: `ItemTable`의 상태 컴포넌트/재시도 확인, `useItems.isRefreshing` 추가
- Comparables: `InvestmentAnalysis` 에러 시 재시도 버튼 제공(`onRetry`)
- API 레이어: `AbortController` 기반 기본 10s 타임아웃, `ApiError` 표준화 및 `text/plain` 오류 메시지 캡처

---

## ▶ 다음에 할 일(Next Steps)

- 모두 200 OK일 때: 상세/Comparables 추가 케이스 스모크, 통합 QA 보완, 리포팅/요청서 발송
- 500 지속 시: 응답 전문/재현 스텝 수집 → 백엔드 회귀 보고, 프론트는 목록 limit/UX 개선 등 병행 진행

---

## 📮 커뮤니케이션 판단(팀별)

- 백엔드팀: 추가 요청 없음(컨테이너 Base URL 고정 및 5개 핵심 + 상세/Comparables 스모크 200 OK 재검증 완료). 필요 시 참조용으로 101~105 상세/Comparables 결과만 요약 공유 가능.
- 인프라팀: Amplify 환경변수 최종 등록 확인 요청 필요
  - `NEXT_PUBLIC_API_BASE_URL` (dev/staging/prod 분리 값)
  - `NEXT_PUBLIC_VWORLD_API_KEY`
  - 확인 응답 후 프론트 `.env` 의존 제거 및 배포 환경 검증 진행

---

## ✉ 커뮤니케이션/요청서 발송 내역 (2025-08-11)

- 회신 완료(인프라 → 프론트 수신 요청 4건)

  - `Communication/Infra/receive/Completed/250811_Infra_to_Frontend_Amplify_ENV_값_확정_및_등록_절차_합의_요청_완료.md`
  - `Communication/Infra/receive/Completed/250811_Infra_to_Frontend_Amplify_ENV_값_확정_필수_정보_요청_완료.md`
  - `Communication/Infra/receive/Completed/250811_Infra_to_Frontend_VWorld_도메인_목록_및_검증_절차_합의_요청_완료.md`
  - `Communication/Infra/receive/Completed/250811_Infra_to_Frontend_통합_정보_요청(Amplify_ENV_VWorld_Build_도메인)_완료.md`
  - 공통 회신 내용: Amplify App ID 미정, VWorld 키(276AABBA-2990-3BAE-B46A-82A7FE6BE021) 반영, 허용 도메인/빌드 런타임 제안안 포함

- 신규 발신(프론트 → 백엔드/인프라 요청 3건)
  - 백엔드: `Communication/Backend/send/Request/250811_Frontend_to_Backend_STG_PRD_API_Base_URL_및_CORS_확정_요청.md`
  - 인프라: `Communication/Infra/send/Request/250811_Frontend_to_Infra_VWorld_허용_도메인_확정_및_등록_요청.md`
  - 인프라: `Communication/Infra/send/Request/250811_Frontend_to_Infra_Amplify_빌드_Runtime_Node20_pnpm9_고정_요청.md`

---

## 🧪 통합 QA 체크리스트 진행(요약 입력 구역)

- 원본 체크리스트: `Doc/QA_250811_Frontend_통합_QA_체크리스트.md`
- 아래 요약 체크는 본 로그에서 직접 진행하며, 세부 항목은 원본 문서를 참조합니다.

### A) 목록 화면 QA

- [ ] 초기 진입: 목록 로드/건수/로딩 상태 해제
- [ ] 필터링: 목록/지도 동시 반영, 빈 결과시 EmptyState/재시도 동작
- [ ] 페이지네이션: 이전/다음, 경계값(1/최대) 동작
- [ ] 에러/재시도: 네트워크 차단시 ErrorState 문구, 재시도 복구

### B) 지도 화면 QA

- [ ] 렌더링: 컨테이너/줌/팬, 콘솔 에러 0
- [ ] 데이터 연계: 필터 변경→지도 데이터 동기화

### C) 상세 페이지 QA

- [ ] 기본 정보: 로딩/에러/빈 상태 표준 노출, 핵심 필드 렌더
- [ ] Comparables 탭: 200 OK 수신시 렌더, 에러시 재시도 동작

### D) UX 표준 / 에러 메시지

- [ ] LoadingState / ErrorState / EmptyState 일관 적용
- [ ] ApiError → 사용자 문구 매핑(타임아웃/네트워크/500/404)

### E) 성능/접근성(간단)

- [ ] 초기 로딩 3초 이내(로컬)
- [ ] 키보드 포커스/콘트라스트 기본 준수
