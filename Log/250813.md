# Frontend 개발 로그 - 2025년 8월 13일

작성 시각: 2025-08-13T00:00Z (로컬)

## 📬 수신 요청 요약 (우선순위 판단)

- 백엔드: `Communication/Backend/receive/Request/250811_Backend_to_Frontend_Base_URL_고정_및_3회_스모크_최종_회신_요청.md` 1건 확인
  - 상태 해석: 동일 주제의 회신이 이미 완료됨으로 보임
    - 참고: `Communication/Backend/receive/Completed/250811_Backend_to_Frontend_API_Base_URL_변경_및_스모크_재검증_요청_완료.md`
    - 참고: `Communication/Backend/send/Completed/250811_Frontend_to_Backend_API_Base_URL_변경_및_스모크_재검증_결과_회신_완료.md`
- 인프라/파이프라인/분석/매니지: 신규 Request 없음

결론: 신규 차단 이슈 없음 → 최신 로그의 Next Steps 및 통합 QA, 인프라 확인을 오늘의 우선 작업으로 진행

---

## 📋 오늘의 작업 계획(체크리스트)

1. 통합 QA 체크리스트 실행 및 결과 기록 (`Doc/QA_250811_Frontend_통합_QA_체크리스트.md` 기준) — 진행 중
   - [ ] 목록 화면: 초기 로드/필터/페이지네이션/에러·재시도
   - [ ] 지도 화면(vworld): 렌더/줌·팬/콘솔 에러 0
   - [ ] 상세 + Comparables: 로딩/빈/에러 상태 표준 및 재시도 동작
   - [ ] UX 표준: Loading/Empty/Error 일관 적용, ApiError 문구 매핑
2. 인프라 환경변수 최종 확인 (Amplify) — Completed(문서 준비/대기), 회신 수신 대기
   - [ ] `NEXT_PUBLIC_API_BASE_URL`(dev/stg/prod) 등록 확인 회신 수신
   - [ ] `NEXT_PUBLIC_VWORLD_API_KEY` 등록 확인 회신 수신
   - [ ] 필요 시 `Communication/Infra/send/Request` 후속 Follow-up 발송
3. 지도 엔진(vworld) 로컬 점검
   - [ ] `.env.local`의 `NEXT_PUBLIC_VWORLD_API_KEY` 확인 및 지도 렌더/마커/이동 성능 확인
4. 로컬 빌드 안정화(Windows 환경)
   - [x] `npm ci && npm run build` 1회 성공(Next 15.2.4, SWC WASM) — Application
   - [ ] 경로/OneDrive 이슈 시 SWC WASM 강제 또는 경로 이행 대안 수립
5. 문서/커뮤니케이션 갱신
   - [x] QA/스모크 결과 요약 정리 및 필요 회신서 업데이트
   - [x] README에 Windows 로컬 개발 환경 가이드 섹션 추가
   - [x] 인프라 공지 요청서 처리 상태 갱신
   - [ ] 본 로그 파일 진행도 및 Next Steps 갱신

---

## ✅ DoD / Acceptance Criteria

- 통합 QA 주요 항목 Pass, 회귀 없음(목록/지도/상세/Comparables)
- 인프라: Amplify ENV 2종 등록 확인 회신 수신 또는 후속 요청 발송 완료
- vworld 지도: 콘솔 에러 0, 기본 상호작용 원활
- 로컬 빌드 1회 성공 또는 대안/플랜 문서화
- 커뮤니케이션/로그 최신화 완료

---

## ⚠️ 의존성 / 리스크

- 백엔드 서비스 간헐 회귀 가능성(200→500)
- 인프라 회신 일정 변동 가능성(ENV 등록)
- Windows/OneDrive 경로로 인한 SWC 바이너리 로드 이슈

---

## 🔗 참고 파일

- `Doc/FRONTEND_ARCHITECTURE.md`
- `Doc/PROJECT_FRONTEND_ROADMAP.md`
- `Doc/QA_250811_Frontend_통합_QA_체크리스트.md`
- `Application/lib/api.ts`
- `Application/hooks/useItemDetail.ts`
- `Application/app/analysis/[id]/page.tsx`
- `Communication/Backend/receive/Request/250811_Backend_to_Frontend_Base_URL_고정_및_3회_스모크_최종_회신_요청.md`

---

## 📈 진행 현황(퍼센트)

- 85%

---

## ▶ 다음에 할 일(Next Steps)

- 통합 QA 결과에 따라 발견 이슈를 우선순위화하고 즉시 수정 또는 요청서 발송
- 인프라 ENV 회신 수신 시 배포 환경 검증(호스트/도메인/CORS)
- 로컬 빌드 안정화 조치 적용 후 재검증 및 문서화

---

## 🔁 재검증 결과 (3회 반복 스모크)

```
items/simple: 200
items/: 200
auction-completed/: 200
real-transactions/: 200
real-rents/: 200
---
items/simple: 200
items/: 200
auction-completed/: 200
real-transactions/: 200
real-rents/: 200
---
items/simple: 200
items/: 200
auction-completed/: 200
real-transactions/: 200
real-rents/: 200
```

요약: 5개 엔드포인트 모두 3회 반복 200 OK 일관성 확인

---

## ✉ 커뮤니케이션/요청서 발송 (예정/진행)

- 인프라팀 완료 문서 확인:
  - `Communication/Infra/send/Completed/250811_Frontend_to_Infra_Amplify_환경변수_최종_등록_확인_요청_완료.md`
  - `Communication/Infra/send/Completed/250811_Frontend_to_Infra_Local_Dev_SWC_WASM_강제_및_경로정책_가이드_요청_완료.md`
  - `Communication/Infra/send/Completed/250811_Frontend_to_Infra_VWorld_허용_도메인_확정_및_등록_요청_완료.md`
- 인프라 수신 요청 처리:
  - `Communication/Infra/receive/Request/250813_Infra_to_Frontend_Windows_Local_Dev_SWC_WASM_경로정책_가이드_공지_요청.md` → Completed (README 반영)

---

## 🧱 빌드 결과 (로컬)

- 디렉터리: `Application`
- 명령: `npm ci` → `npm run build`
- 결과: 성공(Next.js 15.2.4)
- 라우트 빌드 요약: 17개 static/dynamic 페이지 컴파일 완료

---

## 🌐 Dev 서버 라우트 헬스 체크

```
/: 200
/analysis: 200
/features: 200
/pricing: 200
/analysis/101: 200
```

요약: 주요 라우트 200 OK (로컬 dev)

---

## 🧪 통합 QA 체크리스트 진행(요약)

참조: `Doc/QA_250811_Frontend_통합_QA_체크리스트.md`

### 2) 목록 화면 QA

- [x] A. 초기 진입: 기본 목록 로드 200 OK (헬스 체크 기반)
- [ ] A. 건수 표시/로딩 상태 표기 확인 (수동 확인 예정)
- [ ] B. 필터링: 목록/지도 동시 반영 (수동 확인 예정)
- [ ] B. 빈 결과 시 EmptyState 및 재시도 (수동 확인 예정)
- [ ] C. 페이지네이션: 증감/경계 동작 (수동 확인 예정)
- [ ] D. 에러/재시도: 네트워크 차단 시 표준 문구/복구 (수동 확인 예정)

### 3) 지도 화면 QA

- [x] A. Kakao 임시 전환 ENV 적용(.env.local 저장)
- [ ] A. 렌더/줌/팬 (브라우저 수동 확인 예정)
- [ ] A. 콘솔 에러 0 (수동 확인 예정)
- [ ] B. 필터 변경→지도 동기화 (수동 확인 예정)

### 4) 상세 페이지 QA

- [x] A. 기본 라우트 200 OK (헬스 체크 기반)
- [ ] A. 로딩/에러/빈 상태 표준 노출 (수동 확인 예정)
- [ ] B. Comparables 200 OK 렌더/에러 시 재시도 (수동 확인 예정)

---

## 🚨 API 회귀 감지 (로컬 컨테이너)

health: 200 / 데이터 엔드포인트: 500 회귀 확인(3회 반복)

```
items/simple: 500
items/: 500
auction-completed/: 500
real-transactions/: 500
real-rents/: 500
```

상세 원문 요약:

- auction-completed: UndefinedTable "auction_completed"
- real-transactions: UndefinedTable "real_transactions"
- real-rents: UndefinedTable "real_rents"
- items/items-simple: 500 (text/plain)
- 상세/Comparables(101~105): 모두 500

가설: DB 마이그레이션/시드 미적용 또는 볼륨 초기화로 인한 테이블 부재

요청서 발신: `Communication/Backend/send/Request/250813_Frontend_to_Backend_API_Regression_보고_및_마이그레이션_확인_요청.md`

### 5) UX 표준 / 에러 메시지

- [ ] Loading/Error/Empty 일관 적용 확인 (수동 확인 예정)
- [ ] ApiError 사용자 문구 매핑(타임아웃/네트워크/500/404) 확인 (수동 확인 예정)

### 6) 성능/접근성(간단)

- [ ] 초기 로딩 3초 이내(워밍 이후 재측정) (보류)
- [ ] 포커스/콘트라스트 (수동 확인 예정)

---

## 메모

- VWorld 키 필요: `.env.local`의 `NEXT_PUBLIC_VWORLD_API_KEY` 설정 후 지도 QA 진행(운영 승인 대기)
- Kakao 임시 전환: `.env.local`에 `NEXT_PUBLIC_MAP_PROVIDER=kakao`, `NEXT_PUBLIC_KAKAO_APP_KEY=****` 적용

---

## ✅ SWR 에러 원인 및 조치 (완료)

- 증상: `/analysis` 진입 시 SWR 에러 콘솔 로그
- 원인: 프론트 베이스 URL 포트 불일치(8000 사용)
- 조치: `.env.local`에 `NEXT_PUBLIC_API_BASE_URL=http://127.0.0.1:8001` 고정 후 dev 재기동
- 재검증(상태코드):
  - health(8001): 200
  - items/simple(8001): 200
  - items(8001): 200
  - auction-completed(8001): 200
  - real-transactions(8001): 200
  - real-rents(8001): 200
- 결론: SWR 에러 해소. 로컬 컨테이너는 8001 사용 유지

---

## 📌 Kakao 도메인/ENV 운영 계획 (메모)

- 현재: Kakao 콘솔에 로컬 `http://localhost:3000` 등록 진행 중(인프라)
- dev/stg 도메인: Amplify 배포 생성 전이라 미정(최종 배포 직전 생성/등록)
- 배포 시: Amplify ENV 일괄 반영(`NEXT_PUBLIC_MAP_PROVIDER`, `NEXT_PUBLIC_KAKAO_APP_KEY`)

---

## 오늘 진행된 환경 설정 및 커뮤니케이션 (자동 기록)

- [2025-08-13T19:52:39+08:00] .env.local 생성/갱신: NEXT_PUBLIC_MAP_PROVIDER=kakao, NEXT_PUBLIC_API_BASE_URL=http://127.0.0.1:8001
- [2025-08-13T19:52:39+08:00] Infra에 Kakao 도메인/키 요청서 발신: Communication/Infra/send/Request/250813*Frontend_to_Infra_Kakao*도메인*목록*회신*및\_JS*키\_요청.md

---

## Dev 서버 라우트 헬스 체크 (자동 기록)

- 실행 시각: 2025-08-13T20:05:40+08:00
- /: 200
- /analysis: 200
- /features: 200
- /pricing: 200
- /analysis/101: 200

---

## Incident Note: SWR error on /analysis (resolved)

- Time: 2025-08-13T21:14:30+08:00
- Symptom: console 'SWR error: { key ~= err }' on /analysis
- Cause: fetcher did not destructure SWR v2 array-key args; key string propagated to err
- Fix:
  - Application/lib/fetcher.ts: fetcher(...args) supports array/tuple forms and builds absolute URL with base
  - Application/app/providers.tsx: SWRConfig.fetcher registered
  - Dev server restarted (npm run dev)
- Verification: /analysis 200 OK; error gone

---

## 기능/코드 변경 (자동 기록)

- [2025-08-13T22:16:36+08:00] SWR 전역 fetcher 도입 및 SWR v2 배열 키 대응: Application/lib/fetcher.ts, app/providers.tsx
- [2025-08-13T22:16:36+08:00] /analysis 목록 API 전환: GET /api/v1/items/simple, 파라미터/응답 스키마 매핑 보강
  - 파라미터: region, buildingType, min_built_year, max_built_year, min_price, max_price, min_area, max_area, has_elevator, auction_status, page, limit
  - 총건수: totalItems | total | count 지원
  - 렌더 매핑: buildYear|built_year, buildingType|property_type 대응 (components/features/item-table.tsx)
- [2025-08-13T22:16:36+08:00] Next.js dev 설정: allowedDevOrigins 추가(dev) 정적 자산 404 해소

---

## 재검증/상태

- Dev 라우트 200 OK (/, /analysis 등)
- Backend 헬스: 8000=200, 8001=200
- Items Simple 샘플 호출: http://127.0.0.1:8001/api/v1/items/simple?limit=5 200 OK 확인
- /analysis 목록: 전환 후 로딩데이터 렌더링 확인 대기(브라우저 새로고침/캐시 영향 가능성), 필터 연동 점검 진행 중

---

## 다음에 할 일(Next Steps)

- 필터 동작 점검: 모든 필터 변경 시 요청 파라미터 반영/표 렌더 확인
- Kakao 지도: 127.0.0.1:3000 허용 도메인 재확인 후 로드/줌/팬/콘솔 에러 0 확인
- 결과 스크린샷/Network 캡처 수집하여 백엔드/인프라 회신

---

## 오늘 변경 사항 (자동 기록 추가)

- [2025-08-13T22:55:00+09:00] 필터 UI 확장: 주소(구역/시도/읍면동), 매각기일(From/To), 매각\_월, 1억 이하 토글
- [2025-08-13T22:55:00+09:00] 스토어 확장: `province, cityDistrict, town, auctionDateFrom, auctionDateTo, auctionMonth, under100` 필드 추가
- [2025-08-13T22:55:00+09:00] useItems 매핑 보강: 위 필드들을 `/api/v1/items/simple` 쿼리로 반영
- [2025-08-13T22:55:00+09:00] fetcher 개발 로그 추가: 개발 모드에서 최종 요청 URL을 `console.debug("SWR fetch:", url)`로 출력
- [2025-08-13T22:55:00+09:00] /analysis 실검증: 목록 렌더링 정상(200 OK), `province=경기도` 반영 확인

### 지도 상태

- Kakao 임시 전환 중(.env.local 적용). vworld 운영키 승인 전까지 Kakao 우선 사용
- 현 시점 지도 탭: 초기화 대기 메시지 노출 → ENV/도메인 허용 재확인 및 dev 재기동 후 재검증 예정

### 커뮤니케이션

- Backend: Items Simple 전환 및 렌더링 검증 완료 회신(완료 문서 생성 예정)
- Infra: Kakao `127.0.0.1:3000` 도메인 등록 재확인, VWorld 키 승인 ETA 문의(팔로업 예정)
