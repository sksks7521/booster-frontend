# 실거래가(매매) 페이지 검증 가이드

## 📅 작성일: 2025-10-03

## 🎯 검증 목적

- 작업 D (SWR 최적화) 검증
- 작업 C (빈 상태 & 에러 메시지 개선) 검증

---

## ✅ 작업 D: SWR 캐싱 최적화 검증

### **검증 1: 중복 요청 방지 (dedupingInterval: 1500ms)**

#### 📋 테스트 절차

1. 브라우저 개발자 도구 열기 (F12)
2. Network 탭 선택
3. 필터를 "Fetch/XHR"로 설정
4. 실거래가 페이지 접속: `http://localhost:3000/analysis/10071/v2?ds=sale`
5. 지역 선택: **경기도** → **고양시 덕양구**
6. Network 탭에서 `/api/v1/real-transactions/` 요청 확인 (첫 요청)
7. **1초 대기** 후 다시 **고양시 덕양구** 선택
8. Network 탭 확인: **새 요청 없음** (캐시 사용)
9. **3초 대기** 후 다시 **고양시 덕양구** 선택
10. Network 탭 확인: **새 요청 발생** (1.5초 초과)

#### ✅ 예상 결과

```
시간 0초: 경기도 → 고양시 덕양구 선택
→ /api/v1/real-transactions/?sido=경기도&sigungu=고양시 덕양구&page=1&size=20
→ Status: 200 OK ✅

시간 1초: 다시 고양시 덕양구 선택
→ API 요청 없음 (캐시 사용) ✅
→ 데이터 즉시 표시 ✅

시간 4초: 다시 고양시 덕양구 선택
→ /api/v1/real-transactions/?sido=경기도&sigungu=고양시 덕양구&page=1&size=20
→ Status: 200 OK ✅ (1.5초 경과 후 새 요청)
```

---

### **검증 2: 탭 전환 시 재요청 방지 (revalidateOnFocus: false)**

#### 📋 테스트 절차

1. 실거래가 페이지에서 데이터 로드 완료
2. Network 탭 Clear (🚫 버튼 클릭)
3. 다른 브라우저 탭으로 이동 (예: 네이버)
4. 10초 대기
5. 다시 실거래가 페이지 탭으로 복귀
6. Network 탭 확인: **새 요청 없음**

#### ✅ 예상 결과

```
탭 복귀 시:
→ API 요청 없음 ✅
→ 기존 데이터 유지 표시 ✅
```

---

### **검증 3: 페이지 전환 시 깜빡임 방지 (keepPreviousData: true)**

#### 📋 테스트 절차

1. 실거래가 페이지에서 데이터 로드 (페이지 1)
2. 페이지네이션에서 **2페이지** 클릭
3. 화면 변화 관찰

#### ✅ 예상 결과

```
Before (keepPreviousData: false):
[1페이지 데이터] → [빈 화면 + 로딩 스피너] → [2페이지 데이터]
→ 깜빡임 발생 ❌

After (keepPreviousData: true):
[1페이지 데이터] → [1페이지 데이터 + 로딩 표시] → [2페이지 데이터]
→ 부드러운 전환 ✅
```

---

## ✅ 작업 C: 빈 상태 & 에러 메시지 개선 검증

### **검증 4: 로딩 상태**

#### 📋 테스트 절차

1. 실거래가 페이지 접속
2. 지역 선택: **경기도** → **고양시 덕양구**
3. 로딩 중 화면 확인

#### ✅ 예상 결과

```
표시 내용:
- 🔄 회전하는 로딩 스피너 (파란색)
- 제목: "데이터를 불러오는 중입니다..."
- 설명: "잠시만 기다려주세요"
```

---

### **검증 5: 데이터 없음 상태 (개선된 UI)**

#### 📋 테스트 절차

1. 지역 선택: **경기도** → **고양시 덕양구** → **대덕동**
2. 필터 설정:
   - 거래금액: 1억 ~ 1.5억
   - 전용면적: 30㎡ ~ 40㎡
   - 건축연도: 2023년 ~ 2024년
3. 검색 결과 0건 확인
4. 화면에 표시되는 내용 확인

#### ✅ 예상 결과

```
표시 내용:
1. 아이콘: 📋 List 아이콘 (회색)
2. 제목: "검색 결과가 없습니다"
3. 설명: "선택하신 조건에 맞는 매매 거래 내역이 없습니다."

4. 현재 조건 박스 (파란색 배경):
   📋 현재 조건
   - 지역: 경기도 > 고양시 덕양구 > 대덕동
   - 거래금액: 10000만원 ~ 15000만원
   - 전용면적: 30㎡ ~ 40㎡
   - 건축연도: 2023년 ~ 2024년

5. 제안 카드 4개 (회색 배경):
   ├─ 📅 기간 확대
   │  └─ "최근 거래가 적을 수 있습니다. 조회 기간을 넓혀보세요."
   ├─ 💰 가격 범위 조정
   │  └─ "가격 필터를 해제하거나 범위를 넓혀보세요."
   ├─ 📐 면적 조건 완화
   │  └─ "전용면적 범위를 넓히거나 필터를 해제해보세요."
   └─ 📍 지역 범위 확대
      └─ "읍면동 필터를 해제하고 시군구 전체를 조회해보세요."
```

#### 🎨 디자인 체크

- [ ] 파란색 박스가 눈에 잘 띄는가?
- [ ] 현재 필터 조건이 명확히 보이는가?
- [ ] 제안 카드들이 깔끔하게 정렬되었는가?
- [ ] 모바일에서도 잘 보이는가? (2열 → 1열 변환)

---

### **검증 6: 에러 상태 - 서버 에러 (500)**

#### 📋 테스트 절차

백엔드 서버를 일시적으로 중단하거나, 개발자 도구에서 네트워크 오프라인 설정

1. 브라우저 개발자 도구 열기
2. Network 탭 → Throttling → Offline 선택
3. 지역 선택 시도
4. 에러 화면 확인

#### ✅ 예상 결과

```
표시 내용:
1. 아이콘: ⚠️ 경고 아이콘 (빨간색)
2. 제목: "데이터를 불러오는 중 오류가 발생했습니다"
3. 설명: "예상치 못한 오류가 발생했습니다." (또는 네트워크 오류 메시지)

4. 안내 박스 (회색 배경):
   "다시 시도해도 문제가 지속되면 고객센터로 문의해주세요."

5. 버튼: "다시 시도" (아이콘 포함)

6. 하단 정보 (회색 테두리):
   "문제가 계속되시나요?"
   "고객센터: help@booster.com"
```

#### 🎨 디자인 체크

- [ ] 에러 아이콘이 명확히 보이는가?
- [ ] 에러 메시지가 사용자 친화적인가?
- [ ] "다시 시도" 버튼이 잘 보이는가?
- [ ] 고객센터 정보가 명확한가?

---

### **검증 7: 에러 상태 - "다시 시도" 버튼 동작**

#### 📋 테스트 절차

1. 에러 상태에서 Network 탭 Offline → Online 변경
2. "다시 시도" 버튼 클릭
3. 데이터 로드 확인

#### ✅ 예상 결과

```
1. "다시 시도" 버튼 클릭
2. 로딩 상태로 전환 ✅
3. API 재요청 발생 ✅
4. 데이터 정상 로드 ✅
```

---

## 📊 검증 체크리스트

### 작업 D (SWR 최적화)

- [ ] ✅ 검증 1: 중복 요청 방지 (1.5초 이내)
- [ ] ✅ 검증 2: 탭 전환 시 재요청 방지
- [ ] ✅ 검증 3: 페이지 전환 시 깜빡임 방지

### 작업 C (빈 상태 & 에러 개선)

- [ ] ✅ 검증 4: 로딩 상태 UI
- [ ] ✅ 검증 5: 데이터 없음 상태 (현재 조건 표시)
- [ ] ✅ 검증 6: 에러 상태 (고객센터 정보)
- [ ] ✅ 검증 7: "다시 시도" 버튼 동작

---

## 🐛 버그 발견 시

### 보고 양식

```markdown
**검증 항목:** [검증 번호 및 이름]
**발견 일시:** [YYYY-MM-DD HH:MM]
**증상:** [구체적인 문제 설명]
**재현 방법:**

1. 단계 1
2. 단계 2
3. ...

**예상 동작:** [어떻게 동작해야 하는지]
**실제 동작:** [실제로 어떻게 동작하는지]
**스크린샷:** [가능하면 첨부]
```

---

## 📝 검증 완료 기록

- **검증자:**
- **검증일:**
- **검증 결과:**
  - 작업 D: [ ] 통과 / [ ] 실패
  - 작업 C: [ ] 통과 / [ ] 실패
- **비고:**

---

## 🎉 검증 완료 후

모든 검증 항목이 통과하면:

1. `Log/251003.md`에 검증 완료 기록
2. `SALE_PLAN.md` 업데이트 (Phase 4 진행률 반영)
3. Git commit & push
