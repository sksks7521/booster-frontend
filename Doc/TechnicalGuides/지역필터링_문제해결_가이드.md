# v2 λ°μ΄ν„°μ…‹ μ§€μ—­ ν•„ν„°λ§ λ¬Έμ  ν•΄κ²° κ°€μ΄λ“

## π“‹ κ°μ”

v2 λ°μ΄ν„°μ…‹(auction_ed, real_transactions, real_rents)μ—μ„ μ§€μ—­ μ„ νƒ μ‹ ν•„ν„°λ§μ΄ μ‘λ™ν•μ§€ μ•λ” λ¬Έμ μ ν•΄κ²° λ°©λ²•μ„ μ •λ¦¬ν• κΈ°μ  κ°€μ΄λ“μ…λ‹λ‹¤.

**μ μ© λ€μƒ**:

- κ³Όκ±°κ²½λ§¤κ²°κ³Ό (auction_ed) β… **ν•΄κ²° μ™„λ£**
- μ‹¤κ±°λκ°€(λ§¤λ§¤) (real_transactions)
- μ‹¤κ±°λκ°€(μ „μ›”μ„Έ) (real_rents)

## π¨ λ¬Έμ  μ¦μƒ

### **μΌλ°μ μΈ μ¦μƒ**

- μ‚¬μ©μκ°€ νΉμ • μ§€μ—­(μ: "κ²½κΈ°λ„ κ³ μ–‘μ‹") μ„ νƒ
- μ „μ²΄ μ§€μ—­ λ°μ΄ν„°κ°€ ν‘μ‹λ¨ (ν•„ν„°λ§ μ•λ¨)
- λ°μ΄ν„° κ°μκ°€ μ „μ²΄ λ°μ΄ν„°μ…‹ ν¬κΈ°μ™€ λ™μΌ

### **μ§„λ‹¨ λ°©λ²•**

```javascript
// λΈλΌμ°μ € μ½μ†”μ—μ„ ν™•μΈ
console.log("ν•„ν„° μƒνƒ:", filters);
console.log("API νλΌλ―Έν„°:", filtersForQuery);
console.log("μ„λ²„ μ‘λ‹µ total:", result.total);
console.log("μ²« λ²μ§Έ μ•„μ΄ν… μ£Όμ†:", result.items?.[0]?.address);
```

## π” λ¬Έμ  μ›μΈ λ¶„μ„

### **1. ν”„λ΅ νΈμ—”λ“ μ›μΈ**

- **ν΄λΌμ΄μ–ΈνΈ μ¤‘λ³µ ν•„ν„°λ§**: μ„λ²„ + ν΄λΌμ΄μ–ΈνΈμ—μ„ μ΄μ¤‘ ν•„ν„°λ§
- **μΆν‘ ν•„ν„°λ§ μ¶©λ**: μ§€μ—­ ν•„ν„°μ™€ μΆν‘ κΈ°λ° ν•„ν„°κ°€ λ™μ‹ μ μ©
- **ν•„ν„° λ§¤ν•‘ μ¤λ¥**: ν”„λ΅ νΈμ—”λ“ ν•„ν„°λ…κ³Ό λ°±μ—”λ“ ν•„λ“λ… λ¶μΌμΉ

### **2. λ°±μ—”λ“ μ›μΈ**

- **API νλΌλ―Έν„° λ―Έμ •μ**: μ—”λ“ν¬μΈνΈμ—μ„ μ§€μ—­ ν•„ν„° νλΌλ―Έν„° λ„λ½
- **CRUD μ „λ‹¬ μ‹¤ν¨**: ν•„ν„° νλΌλ―Έν„°κ°€ λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬λ΅ μ „λ‹¬λμ§€ μ•μ

## π”§ ν•΄κ²° λ°©λ²•

### **Step 1: ν”„λ΅ νΈμ—”λ“ μμ •**

#### **A. μ§€μ—­ ν•„ν„° λ§¤ν•‘ ν™•μΈ** (`Application/datasets/registry.ts`)

```typescript
// auction_ed μμ‹
if (filters?.province) {
  mappedFilters.address_area = filters.province;
  delete mappedFilters.province;
}
if (filters?.cityDistrict) {
  mappedFilters.address_city = String(filters.cityDistrict);
  delete mappedFilters.cityDistrict;
}

// real_transactions μμ‹ (λ°±μ—”λ“ μ¤ν‚¤λ§μ— λ”°λΌ μ΅°μ •)
if (filters?.province) {
  mappedFilters.sido = filters.province;
  delete mappedFilters.province;
}
if (filters?.cityDistrict) {
  mappedFilters.sigungu = String(filters.cityDistrict);
  delete mappedFilters.cityDistrict;
}
```

#### **B. ν΄λΌμ΄μ–ΈνΈ ν•„ν„°λ§ μ„¤μ •** (`Application/components/features/[dataset]/[Dataset]SearchResults.tsx`)

```typescript
// μ„λ²„μ—μ„ λ¨λ“  ν•„ν„°λ§μ„ μ§€μ›ν•λ” κ²½μ°
const needsClientProcessing = false;

// λλ” μ΅°κ±΄λ¶€ μ„¤μ •
const needsClientProcessing = needsClientProcessing
  ? rawItems?.filter((item: any) => {
      /* ν•„ν„°λ§ λ΅μ§ */
    }) || []
  : rawItems || []; // μ„λ²„ λ°μ΄ν„° κ·Έλ€λ΅ μ‚¬μ©
```

#### **C. μΆν‘ ν•„ν„°λ§ μ κ±°** (`Application/app/analysis/[id]/v2/page.tsx`)

```typescript
const queryFilters = {
  province: zFilters?.province,
  cityDistrict: zFilters?.cityDistrict,
  town: zFilters?.town,
  // μ§€μ—­ ν•„ν„°λ§ μ‚¬μ©ν•λ” κ²½μ° μΆν‘ κ΄€λ ¨ νλΌλ―Έν„° μ κ±°
  // lat: centerAndRadius?.lat,
  // lng: centerAndRadius?.lng,
  // radius_km: centerAndRadius?.radius_km,
};
```

### **Step 2: λ°±μ—”λ“ ν‘μ—…**

#### **A. μ”μ²­μ„ μ‘μ„± ν…ν”λ¦Ώ**

**νμΌλ…**: `Communication/Backend/send/Request/YYMMDD_Frontend_to_Backend_[λ°μ΄ν„°μ…‹]_μ§€μ—­ν•„ν„°λ§_λ²„κ·Έμμ •_μ”μ²­.md`

**ν•„μ ν¬ν•¨ λ‚΄μ©**:

```markdown
## λ¬Έμ  μƒν™©

- API: /api/v1/[λ°μ΄ν„°μ…‹]/
- νλΌλ―Έν„°: address_area=κ²½κΈ°λ„&address_city=κ²½κΈ°λ„ κ³ μ–‘μ‹
- ν„μ¬ μ‘λ‹µ: μ „μ²΄ λ°μ΄ν„° λ°ν™
- κΈ°λ€ μ‘λ‹µ: ν•΄λ‹Ή μ§€μ—­ λ°μ΄ν„°λ§ λ°ν™

## μ¬ν„ λ°©λ²•

1. ν”„λ΅ νΈμ—”λ“ URL μ ‘μ†
2. μ§€μ—­ μ„ νƒ
3. API νΈμ¶ ν™•μΈ

## μ”μ²­ μ‚¬ν•­

1. μ—”λ“ν¬μΈνΈμ— μ§€μ—­ ν•„ν„° νλΌλ―Έν„° μ¶”κ°€
2. CRUDλ΅ ν•„ν„° μ΅°κ±΄ μ „λ‹¬
3. ν…μ¤νΈ μΌ€μ΄μ¤ κ²€μ¦

## ν…μ¤νΈ μΌ€μ΄μ¤

| νλΌλ―Έν„°                                       | κΈ°λ€ κ²°κ³Ό              |
| ---------------------------------------------- | ---------------------- |
| address_area=κ²½κΈ°λ„&address_city=κ²½κΈ°λ„ κ³ μ–‘μ‹ | κ²½κΈ°λ„ κ³ μ–‘μ‹ λ°μ΄ν„°λ§ |
| address_area=μ„μΈνΉλ³„μ‹                        | μ„μΈνΉλ³„μ‹ μ „μ²΄ λ°μ΄ν„° |
```

#### **B. λ°±μ—”λ“ μμ • ν™•μΈμ‚¬ν•­**

- API μ—”λ“ν¬μΈνΈμ— μ§€μ—­ ν•„ν„° νλΌλ―Έν„° μ •μ
- CRUD ν•¨μλ΅ ν•„ν„° μ΅°κ±΄ μ „λ‹¬
- SQL WHERE μ μ— μ§€μ—­ μ΅°κ±΄ μ μ©

### **Step 3: κ²€μ¦ λ° ν…μ¤νΈ**

#### **A. API μ§μ ‘ ν…μ¤νΈ**

```bash
# cURL ν…μ¤νΈ
curl -G "http://127.0.0.1:8000/api/v1/[λ°μ΄ν„°μ…‹]/" \
  --data-urlencode "address_area=κ²½κΈ°λ„" \
  --data-urlencode "address_city=κ²½κΈ°λ„ κ³ μ–‘μ‹" \
  --data-urlencode "page=1" \
  --data-urlencode "size=20"
```

#### **B. λΈλΌμ°μ € ν…μ¤νΈ**

```javascript
// λΈλΌμ°μ € μ½μ†”μ—μ„ μ‹¤ν–‰
fetch(
  "http://127.0.0.1:8000/api/v1/[λ°μ΄ν„°μ…‹]/?address_area=" +
    encodeURIComponent("κ²½κΈ°λ„") +
    "&address_city=" +
    encodeURIComponent("κ²½κΈ°λ„ κ³ μ–‘μ‹") +
    "&page=1&size=20"
)
  .then((r) => r.json())
  .then((d) => {
    console.log("total:", d.total);
    console.log("μ²« λ²μ§Έ μ•„μ΄ν…:", d.items?.[0]);
  });
```

#### **C. κ²€μ¦ μ²΄ν¬λ¦¬μ¤νΈ**

- [ ] λ„¤νΈμ›ν¬ μ”μ²­μ—μ„ μ¬λ°”λ¥Έ νλΌλ―Έν„° μ „λ‹¬ ν™•μΈ
- [ ] API μ‘λ‹µμ—μ„ ν•„ν„°λ§λ λ°μ΄ν„°λ§ λ°ν™ ν™•μΈ
- [ ] μ²« λ²μ§Έ μ•„μ΄ν…μ μ£Όμ†κ°€ μ„ νƒν• μ§€μ—­κ³Ό μΌμΉ ν™•μΈ
- [ ] μ΄ λ°μ΄ν„° κ°μκ°€ ν•©λ¦¬μ μΈ λ²”μ„ ν™•μΈ
- [ ] νμ΄μ§€λ„¤μ΄μ… μ •μƒ μ‘λ™ ν™•μΈ

## π“ λ°μ΄ν„°μ…‹λ³„ ν•„λ“ λ§¤ν•‘

### **auction_ed (κ³Όκ±°κ²½λ§¤κ²°κ³Ό)**

```typescript
// ν”„λ΅ νΈμ—”λ“ β†’ λ°±μ—”λ“
province β†’ address_area
cityDistrict β†’ address_city
town β†’ eup_myeon_dong
```

### **real_transactions (μ‹¤κ±°λκ°€ λ§¤λ§¤)**

```typescript
// λ°±μ—”λ“ μ¤ν‚¤λ§ ν™•μΈ ν›„ μ—…λ°μ΄νΈ ν•„μ”
province β†’ sido (μ¶”μ •)
cityDistrict β†’ sigungu (μ¶”μ •)
town β†’ admin_dong_name (μ¶”μ •)
```

### **real_rents (μ‹¤κ±°λκ°€ μ „μ›”μ„Έ)**

```typescript
// λ°±μ—”λ“ μ¤ν‚¤λ§ ν™•μΈ ν›„ μ—…λ°μ΄νΈ ν•„μ”
province β†’ sido (μ¶”μ •)
cityDistrict β†’ sigungu (μ¶”μ •)
town β†’ admin_dong_name (μ¶”μ •)
```

## π¨ μ£Όμμ‚¬ν•­

### **κ°λ° μ‹ μ£Όμμ **

1. **ν•„λ“λ… ν™•μΈ**: κ° λ°μ΄ν„°μ…‹μ λ°±μ—”λ“ μ¤ν‚¤λ§μ— λ”°λΌ ν•„λ“λ…μ΄ λ‹¤λ¥Ό μ μμ
2. **λ°μ΄ν„° ν•μ‹**: μ§€μ—­λ…μ μ •ν™•ν• ν•μ‹ ν™•μΈ (μ: "κ²½κΈ°λ„ κ³ μ–‘μ‹" vs "κ³ μ–‘μ‹")
3. **μ„±λ¥ κ³ λ ¤**: ν΄λΌμ΄μ–ΈνΈ ν•„ν„°λ§ λΉ„ν™μ„±ν™”λ΅ μ„λ²„ λ¶€ν• μ¦κ°€ κ°€λ¥μ„±

### **ν…μ¤νΈ μ‹ μ£Όμμ **

1. **μΊμ‹ λ¬΄ν¨ν™”**: λΈλΌμ°μ € μΊμ‹λ‚ SWR μΊμ‹λ΅ μΈν• μ΄μ „ κ²°κ³Ό ν‘μ‹ κ°€λ¥
2. **λ‹¤μ–‘ν• μ§€μ—­ ν…μ¤νΈ**: μ—¬λ¬ μ§€μ—­μ—μ„ μ •μƒ μ‘λ™ ν™•μΈ
3. **μ—£μ§€ μΌ€μ΄μ¤**: μ§€μ—­λ…μ— νΉμλ¬Έμλ‚ κ³µλ°±μ΄ ν¬ν•¨λ κ²½μ° ν…μ¤νΈ

## π“ μ°Έκ³  μλ£

### **κ΄€λ ¨ νμΌλ“¤**

- `Application/datasets/registry.ts`: λ°μ΄ν„°μ…‹ μ„¤μ • λ° ν•„ν„° λ§¤ν•‘
- `Application/components/features/[dataset]/[Dataset]SearchResults.tsx`: κ²€μƒ‰ κ²°κ³Ό μ»΄ν¬λ„νΈ
- `Application/app/analysis/[id]/v2/page.tsx`: v2 νμ΄μ§€ ν•„ν„° μ„¤μ •
- `Communication/Backend/receive/Request/250830_Backend_to_Frontend_*_μ¤ν‚¤λ§_κ³µμ _λ°_μμ‹_μ‘λ‹µ.md`: λ°±μ—”λ“ μ¤ν‚¤λ§ λ¬Έμ„

### **μ„±κ³µ μ‚¬λ΅€**

- **auction_ed**: 2025-09-01 ν•΄κ²° μ™„λ£
  - λ¬Έμ : 99,075κ° β†’ ν•΄κ²°: 2,651κ° (κ²½κΈ°λ„ κ³ μ–‘μ‹)
  - μ°Έκ³ : `Log/250901.md`

---

**μ‘μ„±μΌ**: 2025-09-01  
**μµμΆ… μ—…λ°μ΄νΈ**: 2025-09-01  
**Frontend Team**
